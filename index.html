<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Fluid Simulation</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <canvas id="canvas"></canvas>
    <div id="fpsCounter" style="display: block; position: fixed; top: 10px; left: 10px; background: rgba(0,0,0,0.7); color: #0f0; padding: 8px 12px; font-family: monospace; font-size: 14px; border-radius: 4px; z-index: 1000;">FPS: 0</div>

    <div class="controls-panel" id="controlsPanel">
        <button class="minimize-btn" id="minimizeBtn">−</button>
        <h2>Fluid Simulation Controls</h2>
        
        <div class="panel-content">
            <!-- Fluid Physics Section -->
            <div class="settings-category collapsed">
                <h3 class="category-header" data-category="physics">
                    <span class="category-icon">▼</span>
                    Fluid Physics
                </h3>
                <div class="category-content" data-category-content="physics">

                <div class="control-group">
                    <label>
                        Diffusion
                        <span class="value-display" id="diffuseValue">0.000</span>
                    </label>
                    <input type="range" id="diffuseSlider" min="0" max="0.1" step="0.001" value="0">
                    <p class="info-text">Controls how quickly color spreads through the fluid</p>
                </div>

                <div class="control-group">
                    <label>
                        Viscosity
                        <span class="value-display" id="viscosityValue">0.000</span>
                    </label>
                    <input type="range" id="viscositySlider" min="0" max="0.1" step="0.001" value="0">
                    <p class="info-text">Controls fluid thickness (higher = thicker)</p>
                </div>

                <div class="control-group">
                    <label>
                        Fade
                        <span class="value-display" id="fadeValue">0.980</span>
                    </label>
                    <input type="range" id="fadeSlider" min="0.90" max="1.0" step="0.001" value="0.98">
                    <p class="info-text">Controls how quickly colors fade (1.0 = no fade)</p>
                </div>

                <div class="control-group">
                    <label>
                        Vorticity
                        <span class="value-display" id="vorticityValue">0.500</span>
                    </label>
                    <input type="range" id="vorticitySlider" min="0" max="1.0" step="0.05" value="0.5">
                    <p class="info-text">Enhances swirling patterns (higher = more swirls)</p>
                </div>
                </div>
            </div>

            <!-- Visual Effects Section -->
            <div class="settings-category collapsed">
                <h3 class="category-header" data-category="visual">
                    <span class="category-icon">▼</span>
                    Visual Effects
                </h3>
                <div class="category-content" data-category-content="visual">

                <div class="control-group">
                    <label>
                        Bloom Intensity
                        <span class="value-display" id="bloomIntensityValue">0.400</span>
                    </label>
                    <input type="range" id="bloomIntensitySlider" min="0" max="1.0" step="0.05" value="0.4">
                    <p class="info-text">Glow effect strength (0 = off, higher = more glow)</p>
                </div>

                <div class="control-group">
                    <label>
                        Bloom Threshold
                        <span class="value-display" id="bloomThresholdValue">0.700</span>
                    </label>
                    <input type="range" id="bloomThresholdSlider" min="0" max="1.0" step="0.05" value="0.7">
                    <p class="info-text">Brightness threshold for bloom (lower = more glow)</p>
                </div>

                <div class="control-group">
                    <label style="margin-bottom: 10px;">Bloom Effect</label>
                    <div class="toggle-btn active" id="bloomToggle">
                        <span>Enabled</span>
                        <div class="toggle-switch"></div>
                    </div>
                </div>

                <div class="control-group">
                    <label style="margin-bottom: 10px;">Vorticity Confinement</label>
                    <div class="toggle-btn active" id="vorticityToggle">
                        <span>Enabled</span>
                        <div class="toggle-switch"></div>
                    </div>
                </div>

                <div class="control-group">
                    <label style="margin-bottom: 10px;">Fade Effect</label>
                    <div class="toggle-btn active" id="fadeToggle">
                        <span>Enabled</span>
                        <div class="toggle-switch"></div>
                    </div>
                </div>
                </div>
            </div>

            <!-- Interaction Section -->
            <div class="settings-category collapsed">
                <h3 class="category-header" data-category="interaction">
                    <span class="category-icon">▼</span>
                    Interaction
                </h3>
                <div class="category-content" data-category-content="interaction">

                <div class="control-group">
                    <label>
                        Color Radius
                        <span class="value-display" id="colorRadiusValue">3</span>
                    </label>
                    <input type="range" id="colorRadiusSlider" min="1" max="20" step="1" value="3">
                </div>

                <div class="control-group">
                    <label>
                        Velocity Radius
                        <span class="value-display" id="velocityRadiusValue">2</span>
                    </label>
                    <input type="range" id="velocityRadiusSlider" min="1" max="10" step="1" value="2">
                </div>

                <div class="control-group">
                    <label style="margin-bottom: 10px;">Obstacles</label>
                    <button class="secondary" id="clearObstaclesBtn" style="width: 100%; margin-bottom: 8px;">Clear All Obstacles</button>
                    <p class="info-text">Click to place obstacles (hold Shift to remove)</p>
                </div>

                <div class="control-group">
                    <label>
                        Obstacle Radius
                        <span class="value-display" id="obstacleRadiusValue">3</span>
                    </label>
                    <input type="range" id="obstacleRadiusSlider" min="1" max="10" step="1" value="3">
                </div>
                </div>
            </div>

            <!-- Performance Section -->
            <div class="settings-category collapsed">
                <h3 class="category-header" data-category="performance">
                    <span class="category-icon">▼</span>
                    Performance
                </h3>
                <div class="category-content" data-category-content="performance">

                <div class="control-group">
                    <label>
                        Grid Size
                        <span class="value-display" id="gridSizeValue">64</span>
                    </label>
                    <input type="range" id="gridSizeSlider" min="64" max="512" step="64" value="64">
                    <p class="info-text">Simulation resolution (requires reload)</p>
                </div>

                <div class="control-group">
                    <label>
                        Display Resolution
                        <span class="value-display" id="displayResolutionValue">512</span>
                    </label>
                    <input type="range" id="displayResolutionSlider" min="256" max="2048" step="256" value="512">
                    <p class="info-text">Higher = better quality but slower (requires reload)</p>
                </div>

                <div class="control-group">
                    <label>
                        Update Interval (ms)
                        <span class="value-display" id="updateIntervalValue">16</span>
                    </label>
                    <input type="range" id="updateIntervalSlider" min="10" max="100" step="5" value="16">
                </div>

                <div class="control-group">
                    <label>
                        Solver Iterations
                        <span class="value-display" id="solverIterationsValue">10</span>
                    </label>
                    <input type="range" id="solverIterationsSlider" min="1" max="20" step="1" value="10">
                    <p class="info-text">Higher = more accurate but slower (requires reload)</p>
                </div>

                <div class="control-group">
                    <label style="margin-bottom: 10px;">Adaptive Performance</label>
                    <div class="toggle-btn active" id="adaptiveToggle">
                        <span>Enabled</span>
                        <div class="toggle-switch"></div>
                    </div>
                    <p class="info-text">Auto-adjusts quality to maintain target FPS</p>
                </div>

                <div class="control-group">
                    <label style="margin-bottom: 10px;">Show FPS</label>
                    <div class="toggle-btn active" id="fpsToggle">
                        <span>Enabled</span>
                        <div class="toggle-switch"></div>
                    </div>
                </div>
                </div>
            </div>

            <!-- Display Section -->
            <div class="settings-category collapsed">
                <h3 class="category-header" data-category="display">
                    <span class="category-icon">▼</span>
                    Display
                </h3>
                <div class="category-content" data-category-content="display">

                <div class="control-group">
                    <label style="margin-bottom: 10px;">Color Palette</label>
                    <select id="paletteSelector" style="width: 100%; padding: 8px 12px; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 6px; color: #fff; font-size: 14px; cursor: pointer;">
                        <option value="rainbow">Rainbow</option>
                        <option value="ocean">Ocean</option>
                        <option value="fire">Fire</option>
                        <option value="neon">Neon</option>
                        <option value="pastel">Pastel</option>
                        <option value="monochrome">Monochrome</option>
                        <option value="sunset">Sunset</option>
                    </select>
                    <p class="info-text">Choose a color scheme for the fluid</p>
                </div>

                <div class="control-group">
                    <label style="margin-bottom: 10px;">Display Mode</label>
                    <div class="toggle-btn" id="drawModeToggle">
                        <span id="drawModeText">Density</span>
                        <div class="toggle-switch"></div>
                    </div>
                </div>

                <div class="control-group">
                    <label style="margin-bottom: 10px;">Texture Draw</label>
                    <div class="toggle-btn active" id="textureDrawToggle">
                        <span>Enabled</span>
                        <div class="toggle-switch"></div>
                    </div>
                </div>
                </div>
            </div>

            <div class="button-group">
                <button id="pauseBtn">Pause</button>
                <button class="secondary" id="clearBtn">Clear</button>
                <button class="reload" id="reloadBtn">Apply & Reload</button>
            </div>

            <p class="info-text" style="margin-top: 20px; text-align: center;">
                <strong>Shortcuts:</strong> P = Pause | A = Toggle Texture | S = Switch Mode
            </p>
        </div>
    </div>

    <script type="module" src="main.js"></script>
</body>
</html>
